<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quáº£n LÃ½ HÃ³a ÄÆ¡n - Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“‹ Quáº£n LÃ½ HÃ³a ÄÆ¡n</h1>
            <p class="subtitle">PhÃ¢n tÃ¡ch vÃ  Upload hÃ³a Ä‘Æ¡n tá»± Ä‘á»™ng</p>
        </header>

        <!-- Status Cards -->
        <div class="status-grid">
            <div class="status-card">
                <div class="status-icon">ğŸ“</div>
                <div class="status-info">
                    <div class="status-label">File Input (data/)</div>
                    <div class="status-value" id="data-files-count">0</div>
                </div>
            </div>
            <div class="status-card">
                <div class="status-icon">ğŸ“„</div>
                <div class="status-info">
                    <div class="status-label">HÃ³a ÄÆ¡n Output (tax_files/)</div>
                    <div class="status-value" id="tax-files-count">0</div>
                </div>
            </div>
            <div class="status-card">
                <div class="status-icon">ğŸ¤–</div>
                <div class="status-info">
                    <div class="status-label">Tráº¡ng ThÃ¡i Upload</div>
                    <div class="status-value" id="script-status" style="font-size: 1.2rem;">Äang dá»«ng</div>
                </div>
            </div>
        </div>

        <!-- Beverage Invoices Section - Always Visible -->
        <div class="action-section" id="beverage-invoices-section">
            <h2>ğŸº HÃ³a ÄÆ¡n Bia/RÆ°á»£u ÄÃ£ ÄÆ°á»£c Thay Tháº¿</h2>
            <div id="beverage-invoices-display">
                <div class="loading">Äang táº£i thÃ´ng tin...</div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-section">
            <h2>Thao TÃ¡c</h2>
            <div class="button-group">
                <button id="btn-start" class="btn btn-success" onclick="startScript()">
                    <span class="btn-icon">â–¶ï¸</span>
                    <span class="btn-text">Báº¯t Ä‘áº§u Upload</span>
                </button>
                <button id="btn-reset" class="btn btn-warning" onclick="resetSoftware()">
                    <span class="btn-icon">ğŸ”„</span>
                    <span class="btn-text">Reset láº¡i pháº§n má»m</span>
                </button>
                <button id="btn-process" class="btn btn-primary" onclick="processDefault()">
                    <span class="btn-icon">ğŸ§¾</span>
                    <span class="btn-text">Xá»­ lÃ½ hÃ³a Ä‘Æ¡n (SBPM)</span>
                </button>
                <button id="btn-fetch" class="btn btn-secondary" onclick="fetchData()">
                    <span class="btn-icon">ğŸ“¥</span>
                    <span class="btn-text">Láº¥y dá»¯ liá»‡u Fabi</span>
                </button>
                <button id="btn-check" class="btn btn-warning" onclick="checkInvoices()">
                    <span class="btn-icon">ğŸ”</span>
                    <span class="btn-text">Kiá»ƒm Tra HÃ³a ÄÆ¡n</span>
                </button>
                <button id="btn-beverage-replace" class="btn btn-primary" onclick="runBeverageReplace()">
                    <span class="btn-icon">ğŸº</span>
                    <span class="btn-text">Thay 5 HÄ Bia/RÆ°á»£u</span>
                </button>
            </div>
            <div id="activity" style="margin-top: 15px; color: #666; font-weight: 500;"></div>
        </div>

        <!-- Delete Buttons -->
        <div class="action-section">
            <h2>XÃ³a Files</h2>
            <div class="button-group">
                <button id="btn-clear-files" class="btn btn-danger" onclick="clearFiles()">
                    <span class="btn-icon">ğŸ—‘ï¸</span>
                    <span class="btn-text">XÃ³a Files Output (tax_files/)</span>
                </button>
                <button id="btn-clear-data" class="btn btn-danger" onclick="clearDataFiles()">
                    <span class="btn-icon">ğŸ—‘ï¸</span>
                    <span class="btn-text">XÃ³a Files Input (data/)</span>
                </button>
            </div>
        </div>

        <!-- Generate Grab Invoice -->
        <div class="action-section">
            <h2>Táº¡o HÃ³a ÄÆ¡n Grab</h2>
            <div class="grab-invoice-form">
                <div class="form-group">
                    <label for="grab-total">Tá»•ng Tiá»n Grab (Ä‘Ã£ gá»“m VAT 8%):</label>
                    <input type="number" id="grab-total" class="form-input" placeholder="Nháº­p tá»•ng tiá»n Grab" min="0" step="1000">
                </div>
                <div class="form-group">
                    <label for="grab-menu">Chá»n Menu:</label>
                    <select id="grab-menu" class="form-input">
                        <option value="simple">Simple Place</option>
                        <option value="taco">Taco Place</option>
                    </select>
                </div>
                <button id="btn-generate-grab" class="btn btn-primary" onclick="generateGrabInvoice()">
                    <span class="btn-icon">ğŸ²</span>
                    <span class="btn-text">Táº¡o HÃ³a ÄÆ¡n Grab</span>
                </button>
            </div>
            <div id="grab-result" class="grab-result" style="display: none;">
                <h3>Káº¿t Quáº£</h3>
                <div id="grab-result-content"></div>
            </div>
        </div>

        <!-- Check Results -->
        <div class="check-results-section" id="check-results-section" style="display: none;">
            <h2>Káº¿t Quáº£ Kiá»ƒm Tra</h2>
            
            <div class="result-card">
                <h3>ğŸ“‹ HÃ³a Ä‘Æ¡n cÃ³ mÃ³n chÆ°a format "Tiáº¿ng Viá»‡t / Tiáº¿ng Anh"</h3>
                <div class="result-content" id="unformatted-invoices">
                    <div class="loading">Äang táº£i...</div>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #e8f4f8; border-radius: 8px; border-left: 4px solid #fda085;">
                <strong>ğŸ’¡ LÆ°u Ã½:</strong> ThÃ´ng tin vá» hÃ³a Ä‘Æ¡n bia/rÆ°á»£u Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ Ä‘Æ°á»£c hiá»ƒn thá»‹ á»Ÿ pháº§n <strong>"ğŸº HÃ³a ÄÆ¡n Bia/RÆ°á»£u ÄÃ£ ÄÆ°á»£c Thay Tháº¿"</strong> á»Ÿ phÃ­a trÃªn trang.
            </div>
        </div>

        <!-- Log Panel -->
        <div class="log-panel" id="log-panel">
            <div class="log-entry">Chá» lá»‡nh...</div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
